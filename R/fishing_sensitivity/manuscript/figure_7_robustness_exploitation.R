#' Figure 7 : Robustness vs exploitation rate scatter plot
data.dir.fscale = '/net/work3/EDAB/atlantis/Shared_Data/fishing_sensitivity_manuscript/data/fscale_combined/'
figure.dir = '/net/work3/EDAB/atlantis/Shared_Data/fishing_sensitivity_manuscript/figures/manuscript/'

guild2spp = read.csv(here::here('diagnostics','functional_groups_match.csv'),as.is = T) %>% select(Code, Guild)
guild.colors = RColorBrewer::brewer.pal(11,'Paired')
names(guild.colors) = sort(unique(guild2spp$Guild))

data.slope = readRDS(paste0(data.dir.fscale,'robustness_fscale_combined.rds'))

ggplot(data = data.slope, aes(x = exploit.prop,y = -biomass.slope, color = Guild))+
  scale_color_manual(values = guild.colors)+
  geom_point(alpha =0.8,size = 5)+
  # geom_text_repel()+
  xlab('Exploitation Rate')+
  ylab('Robustness')+
  theme_bw()+
  theme(legend.position = 'bottom')
ggsave(paste0(figure.dir,'/Figure_7_robustness_exploitation.png'),width = 8,height = 6,units = 'in',dpi = 300)
